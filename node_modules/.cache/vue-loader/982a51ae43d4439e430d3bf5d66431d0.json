{"remainingRequest":"C:\\Users\\ayoub\\OneDrive\\TMM\\Programming Web\\EuroSong - IMS\\eurosong-ims-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\ayoub\\OneDrive\\TMM\\Programming Web\\EuroSong - IMS\\eurosong-ims-master\\src\\pages\\Gamepage.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\ayoub\\OneDrive\\TMM\\Programming Web\\EuroSong - IMS\\eurosong-ims-master\\src\\pages\\Gamepage.vue","mtime":1639482668000},{"path":"C:\\Users\\ayoub\\OneDrive\\TMM\\Programming Web\\EuroSong - IMS\\eurosong-ims-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1639840158312},{"path":"C:\\Users\\ayoub\\OneDrive\\TMM\\Programming Web\\EuroSong - IMS\\eurosong-ims-master\\node_modules\\babel-loader\\lib\\index.js","mtime":1639840161861},{"path":"C:\\Users\\ayoub\\OneDrive\\TMM\\Programming Web\\EuroSong - IMS\\eurosong-ims-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1639840158312},{"path":"C:\\Users\\ayoub\\OneDrive\\TMM\\Programming Web\\EuroSong - IMS\\eurosong-ims-master\\node_modules\\vue-loader\\lib\\index.js","mtime":1639840164238}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vIGNvbXBvbmVudHMKaW1wb3J0IENhcm91c2VsIGZyb20gIi4uL2NvbXBvbmVudHMvQ2Fyb3VzZWwudnVlIjsKCi8vIGV4cG9ydApleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAiR2FtZXBhZ2UiLAogICAgY29tcG9uZW50czogewogICAgICAgIENhcm91c2VsCiAgICB9LAogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBzb25nczogW10sCiAgICAgICAgICAgIGFjdGl2ZVNvbmdJbmRleDogMCwKICAgICAgICAgICAgdm90ZXM6IFsKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBwb2ludHM6IDEsCiAgICAgICAgICAgICAgICAgICAgaXNWb3RlZDogZmFsc2UKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgcG9pbnRzOiAyLAogICAgICAgICAgICAgICAgICAgIGlzVm90ZWQ6IGZhbHNlCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHBvaW50czogNCwKICAgICAgICAgICAgICAgICAgICBpc1ZvdGVkOiBmYWxzZQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBwb2ludHM6IDgsCiAgICAgICAgICAgICAgICAgICAgaXNWb3RlZDogZmFsc2UKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIF0KICAgICAgICB9CiAgICB9LAogICAgbW91bnRlZCgpIHsKICAgICAgICB0aGlzLmZldGNoU29uZ3MoKTsKICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgLy8gbmF2aWdhdGlvbiBtZXRob2QKICAgICAgICBnb1RvUGFnZShwYWdlKSB7CiAgICAgICAgICAgIHRoaXMuJGVtaXQoImNoYW5nZS1wYWdlIiwgcGFnZSk7CiAgICAgICAgfSwKCiAgICAgICAgLy8gZGF0YSBtZXRob2RzCiAgICAgICAgZmV0Y2hTb25ncygpIHsKICAgICAgICAgICAgLy8gR2V0IGFsbCBzb25ncwogICAgICAgICAgICBjb25zdCB1cmwgPSAiaHR0cDovL3dlYnNlcnZpZXMuYmUvZXVyb3NvbmcvU29uZ3MiOwoKICAgICAgICAgICAgZmV0Y2godXJsKQogICAgICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAudGhlbigoc29uZ3MpID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmZldGNoQXJ0aXN0cyhzb25ncyk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICB9LAoKICAgICAgICBmZXRjaEFydGlzdHMoc29uZ3MpIHsKICAgICAgICAgICAgLy8gR2V0IGFsbCBhcnRpc3QKICAgICAgICAgICAgY29uc3QgdXJsID0gImh0dHA6Ly93ZWJzZXJ2aWVzLmJlL2V1cm9zb25nL0FydGlzdHMiOwoKICAgICAgICAgICAgZmV0Y2godXJsKQogICAgICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgLy8gcmVzcG9uc2UgaXMgdGV4dCwgc28gY29udmVydCB0byBqc29uCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAudGhlbigoYXJ0aXN0cykgPT4gewogICAgICAgICAgICAgICAgICAgIC8vIGxvb3Agb3ZlciBhcnJheSBzb25ncyB3aXRoIGZvckVhY2ggbWV0aG9kCiAgICAgICAgICAgICAgICAgICAgc29uZ3MubWFwKChzb25nKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZpbmQgdGhlIGFydGlzdCBpbiBhbiBhcnJheQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhcnRpc3QgPSBhcnRpc3RzLmZpbmQoKGFydGlzdCkgPT4gYXJ0aXN0LmlkID09IHNvbmcuYXJ0aXN0KTsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlcGxhY2UgdGhlIGlkIGJ5IHRoZSBhcnRpc3Qgb2JqZWN0CiAgICAgICAgICAgICAgICAgICAgICAgIHNvbmcuYXJ0aXN0ID0gYXJ0aXN0OwoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmV0dXJuIHRoZSBuZXcgb2JqZWN0CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzb25nOwogICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAvLyBjaGFuZ2UgZGF0YSBvZiBzb25ncywgc28gZXZlcnl0aGluZyB3aWxsIGdldCByZXJlbmRlcmQ7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zb25ncyA9IHNvbmdzOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKCiAgICAgICAgcG9zdFZvdGUocG9pbnRzKSB7CiAgICAgICAgICAgIGNvbnN0IHNvbmdJZCA9IHRoaXMuc29uZ3NbdGhpcy5hY3RpdmVTb25nSW5kZXhdLmlkOwogICAgICAgICAgICBjb25zdCB1cmwgPSAiaHR0cDovL3dlYnNlcnZpZXMuYmUvZXVyb3NvbmcvVm90ZXMiOwoKICAgICAgICAgICAgZmV0Y2godXJsLCB7CiAgICAgICAgICAgICAgICBtZXRob2Q6ICJQT1NUIiwKICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24sIHRleHQvcGxhaW4nLAogICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04JwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgICAgICAgICAgICBzb25nSUQ6IHNvbmdJZCwKICAgICAgICAgICAgICAgICAgICBwb2ludHM6IHBvaW50cywKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0pLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpOwogICAgICAgICAgICB9KS50aGVuKChyZXN1bHQpID0+IHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7CiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKCiAgICAgICAgLy8gbG9naWMgbWV0aG9kcwogICAgICAgIGNoYW5nZUFjdGl2ZVNvbmdJbmRleChpbmRleCkgewogICAgICAgICAgICB0aGlzLmFjdGl2ZVNvbmdJbmRleCA9IGluZGV4OwogICAgICAgIH0sCgogICAgICAgIGFkZFZvdGUocG9pbnRzKSB7CiAgICAgICAgICAgIGxldCB2b3RlcyA9IHRoaXMudm90ZXM7CgogICAgICAgICAgICAvLyBjcmVhdGUgbmV3IGFycmF5IHdoZW4gcG9pbnRzIGlzIGVxdWFsIHRvIGdpdmVuIHBvaW50cywgY2hhbmdlIGlzVm90ZWQgc3RhdGUgc28gaXQgZGlzc2VwZWFycwogICAgICAgICAgICB2b3Rlcy5tYXAoKHZvdGUpID0+IHsKICAgICAgICAgICAgICAgIGlmICh2b3RlLnBvaW50cyA9PSBwb2ludHMpIHsKICAgICAgICAgICAgICAgICAgICB2b3RlLmlzVm90ZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIHZvdGU7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgLy8gcG9zdCBpdCB0byB0aGUgYXBpCiAgICAgICAgICAgIHRoaXMucG9zdFZvdGUocG9pbnRzKTsKCiAgICAgICAgICAgIC8vIGNoZWNrIGlmIGFsbCB2b3RlcyBpc1ZvdGVkIGFyZSBzZXQgdG8gdHJ1ZSBPUiB0aGVyZSBhcmUgbm8gZmFsc2Ugdm90ZXMKICAgICAgICAgICAgbGV0IGFjdGl2ZVZvdGVzID0gdm90ZXMuZmlsdGVyKCh2b3RlKSA9PiB2b3RlLmlzVm90ZWQgPT0gdHJ1ZSk7CgogICAgICAgICAgICAvLyBpZiBldmVyeXRoaW5nIGlzIHZvdGVkLCByZWRpcmVjdCB0byByYW5raW5nCiAgICAgICAgICAgIGlmIChhY3RpdmVWb3Rlcy5sZW5ndGggPT0gdm90ZXMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICB0aGlzLmdvVG9QYWdlKCJyYW5raW5nIik7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9Cn0K"},{"version":3,"sources":["Gamepage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAyBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Gamepage.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n    <div>\n        <button @click=\"goToPage('home')\">\n            Go to home\n        </button>\n        <h1>\n            Game\n        </h1>\n\n        <Carousel\n            :items=\"songs\"\n            :activeIndex=\"activeSongIndex\"\n\n            @change-index=\"changeActiveSongIndex\"\n        />\n\n        <div v-for=\"(vote, index) in votes\" :key=\"index\" >\n            <button @click=\"addVote(vote.points)\" v-if=\"!vote.isVoted\">\n                Add {{ vote.points}} points\n            </button>\n        </div>\n    </div>\n</template>\n\n<script>\n    // components\n    import Carousel from \"../components/Carousel.vue\";\n\n    // export\n    export default {\n        name: \"Gamepage\",\n        components: {\n            Carousel\n        },\n        data() {\n            return {\n                songs: [],\n                activeSongIndex: 0,\n                votes: [\n                    {\n                        points: 1,\n                        isVoted: false\n                    },\n                    {\n                        points: 2,\n                        isVoted: false\n                    },\n                    {\n                        points: 4,\n                        isVoted: false\n                    },\n                    {\n                        points: 8,\n                        isVoted: false\n                    },\n                ]\n            }\n        },\n        mounted() {\n            this.fetchSongs();\n        },\n        methods: {\n            // navigation method\n            goToPage(page) {\n                this.$emit(\"change-page\", page);\n            },\n\n            // data methods\n            fetchSongs() {\n                // Get all songs\n                const url = \"http://webservies.be/eurosong/Songs\";\n\n                fetch(url)\n                    .then((response) => {\n                        return response.json();\n                    })\n                    .then((songs) => {\n                        this.fetchArtists(songs);\n                    });\n            },\n\n            fetchArtists(songs) {\n                // Get all artist\n                const url = \"http://webservies.be/eurosong/Artists\";\n\n                fetch(url)\n                    .then((response) => {\n                        // response is text, so convert to json\n                        return response.json();\n                    })\n                    .then((artists) => {\n                        // loop over array songs with forEach method\n                        songs.map((song) => {\n                            // find the artist in an array\n                            const artist = artists.find((artist) => artist.id == song.artist);\n\n                            // replace the id by the artist object\n                            song.artist = artist;\n\n                            // return the new object\n                            return song;\n                        });\n\n                        // change data of songs, so everything will get rerenderd;\n                        this.songs = songs;\n                    });\n            },\n\n            postVote(points) {\n                const songId = this.songs[this.activeSongIndex].id;\n                const url = \"http://webservies.be/eurosong/Votes\";\n\n                fetch(url, {\n                    method: \"POST\",\n                    headers: {\n                        'Accept': 'application/json, text/plain',\n                        'Content-Type': 'application/json;charset=UTF-8'\n                    },\n                    body: JSON.stringify({\n                        songID: songId,\n                        points: points,\n                    })\n                }).then((response) => {\n                    return response.json();\n                }).then((result) => {\n                    console.log(result);\n                })\n            },\n\n            // logic methods\n            changeActiveSongIndex(index) {\n                this.activeSongIndex = index;\n            },\n\n            addVote(points) {\n                let votes = this.votes;\n\n                // create new array when points is equal to given points, change isVoted state so it dissepears\n                votes.map((vote) => {\n                    if (vote.points == points) {\n                        vote.isVoted = true;\n                    }\n                    return vote;\n                });\n\n                // post it to the api\n                this.postVote(points);\n\n                // check if all votes isVoted are set to true OR there are no false votes\n                let activeVotes = votes.filter((vote) => vote.isVoted == true);\n\n                // if everything is voted, redirect to ranking\n                if (activeVotes.length == votes.length) {\n                    this.goToPage(\"ranking\");\n                }\n            }\n        }\n    }\n</script>"]}]}